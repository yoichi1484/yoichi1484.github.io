function initGeckoAnimation(){const t=document.getElementById("gecko-canvas");if(t){const s=`${t.dataset.baseUrl||""}/assets/json/gecko-frames.json`;new GeckoAnimation("gecko-canvas",s)}}class GeckoAnimation{constructor(t,s){this.canvas=document.getElementById(t),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.frames=[],this.currentFrame=0,this.animationInterval=null,this.framesUrl=s,this.init())}async init(){try{const t=await fetch(this.framesUrl);if(!t.ok)return;if(this.frames=await t.json(),!this.frames||0===this.frames.length)return;this.setCanvasSize(),this.startAnimation(),window.addEventListener("resize",(()=>this.setCanvasSize()))}catch(t){}}setCanvasSize(){if(!this.frames||0===this.frames.length)return;const t=this.canvas.closest("header")||this.canvas.closest("nav");if(!t)return this.canvas.height=56,this.canvas.width=56,void(this.scale=1);const s=t.offsetHeight,i=this.frames[0].length,e=this.frames[0][0].length,a=s-10,n=a/i;this.canvas.height=a,this.canvas.width=e*n,this.scale=n,this.frames.length>0&&this.drawFrame(this.currentFrame)}drawFrame(t){const s=this.frames[t];if(!s)return;const i=s.length,e=s[0].length;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<i;t++)for(let i=0;i<e;i++){const e=s[t][i];"rgba(0,0,0,0)"===e||e.includes(",0)")||(this.ctx.fillStyle=e,this.ctx.fillRect(Math.floor(i*this.scale),Math.floor(t*this.scale),Math.ceil(this.scale),Math.ceil(this.scale)))}}startAnimation(){this.stopAnimation(),this.animationInterval=setInterval((()=>{this.drawFrame(this.currentFrame),this.currentFrame=(this.currentFrame+1)%this.frames.length}),100)}stopAnimation(){this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)}destroy(){this.stopAnimation(),window.removeEventListener("resize",(()=>this.setCanvasSize()))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initGeckoAnimation):initGeckoAnimation();